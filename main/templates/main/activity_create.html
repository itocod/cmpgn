{% extends 'main/face.html' %}

{% block content %}
<style type="text/css">
/* Container style */
.custom-form-container {
    max-width: 100%;
    margin: 20px auto;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
   
    box-sizing: border-box;
    color: #333;
}

/* Form label style */
.custom-label {
    font-weight: bold;
    color: #444;
    display: block;
    margin-bottom: 6px;
}

/* Input, textarea, and select styles */
.custom-input[type="text"],
.custom-input[type="email"],
.custom-input[type="file"],
textarea,
select {
    width: 100%;
    padding: 12px;
    margin-top: 8px;
    border: 1px solid #ccc;
    border-radius: 8px;
    background-color: #fff;
    transition: border-color 0.3s ease;
}

.custom-input:focus,
textarea:focus,
select:focus {
    outline: none;
    border-color: #007bff;
}

/* Emoji button style */
.custom-emoji-button {
    padding: 8px;
    font-size: 24px;
    background-color: #e9ecef;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-right: 5px;
    margin-bottom: 5px;
}

.custom-emoji-button:hover {
    background-color: #ced4da;
}

/* Submit button style */
.custom-submit-button {
    width: 100%;
    padding: 12px;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.custom-submit-button:hover {
    background-color: #0056b3;
}

/* Back button style */
.custom-back-button {
    display: inline-block;
    padding: 10px 15px;
    margin-top: 20px;
    border-radius: 8px;
    text-align: center;
    font-size: 14px;
    background-color: #f9f9f9;
    color: #000;
    border: 1px solid #ccc;
    text-decoration: none;
    transition: background-color 0.3s ease;
}

.custom-back-button:hover {
    background-color: #e2e6ea;
}

/* Responsive styles */
@media (max-width: 600px) {
    .custom-form-container {
        padding: 15px;
    }

    .custom-submit-button,
    .custom-back-button {
        padding: 10px;
        font-size: 16px;
    }

    .custom-emoji-button {
        font-size: 20px;
        padding: 6px;
    }
}
</style>

<h2 style="font-size:22px; padding-left: 20px; color:#333;">Campaign Activities Form</h2>

<div class="custom-form-container">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ formset.management_form }}
        {% for form in formset %}
            <div>
                {{ form.as_p }}
                <label class="custom-label">Emoji:</label>
                <div>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ“¢', '{{ form.content.auto_id }}')">ğŸ“¢</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ‰', '{{ form.content.auto_id }}')">ğŸ‰</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ’¼', '{{ form.content.auto_id }}')">ğŸ’¼</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ“Š', '{{ form.content.auto_id }}')">ğŸ“Š</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ’¡', '{{ form.content.auto_id }}')">ğŸ’¡</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ”', '{{ form.content.auto_id }}')">ğŸ”</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ“£', '{{ form.content.auto_id }}')">ğŸ“£</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ¯', '{{ form.content.auto_id }}')">ğŸ¯</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ””', '{{ form.content.auto_id }}')">ğŸ””</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ“±', '{{ form.content.auto_id }}')">ğŸ“±</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ’¸', '{{ form.content.auto_id }}')">ğŸ’¸</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ”‘', '{{ form.content.auto_id }}')">ğŸ”‘</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ”¦', '{{ form.content.auto_id }}')">ğŸ”¦</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ', '{{ form.content.auto_id }}')">ğŸ</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ“†', '{{ form.content.auto_id }}')">ğŸ“†</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ’»', '{{ form.content.auto_id }}')">ğŸ’»</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ“', '{{ form.content.auto_id }}')">ğŸ“</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ”§', '{{ form.content.auto_id }}')">ğŸ”§</button>
                    <button type="button" class="custom-emoji-button" onclick="addEmoji('ğŸ› ï¸', '{{ form.content.auto_id }}')">ğŸ› ï¸</button>
                </div>
                <label class="custom-label">Activities:</label>
                <div>{{ campaign.get_objective_and_activities.Activities }}</div>
            </div>
        {% endfor %}
        <button type="submit" class="custom-submit-button">Submit</button>
    </form>
</div>

<script>
    function addEmoji(emoji, fieldId) {
        var contentField = document.getElementById(fieldId);
        contentField.value += emoji;
    }

    function uploadAudio() {
        var input = document.createElement('input');
        input.type = 'file';
        input.accept = 'audio/*, video/*';

        input.onchange = function(e) {
            var file = e.target.files[0];
            var audio = document.getElementById('bgAudio');
            audio.pause();
            localStorage.setItem('bgAudioFile', URL.createObjectURL(file));
            localStorage.setItem('bgAudioPosition', audio.currentTime);
            audio.src = localStorage.getItem('bgAudioFile');
            audio.play();
        };

        input.click();
    }

    window.onload = function() {
        var audio = document.getElementById('bgAudio');
        var bgAudioFile = localStorage.getItem('bgAudioFile');
        var audioPosition = parseFloat(localStorage.getItem('bgAudioPosition'));

        if (bgAudioFile) {
            audio.src = bgAudioFile;
            audio.addEventListener('loadedmetadata', function() {
                if (!isNaN(audioPosition)) {
                    audio.currentTime = audioPosition;
                }
                audio.play();
            });
        }
    }
</script>

<a href="{% url 'view_campaign' campaign_id=campaign.pk %}" class="custom-back-button"> 
    <i class="fa fa-arrow-left"></i> Back 
</a>
{% endblock %}
