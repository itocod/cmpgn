{% extends 'main/face.html' %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google Site Verification Meta Tag -->
    <meta name="google-site-verification" content="2IjHwnbJp2eoJ42Ec2-vy5FHzwfpyA4qxZlA2Ct1lW8" />
    
    <!-- bing Site Verification Meta Tag -->
    <meta name="msvalidate.01" content="2DF73531AC8292B0D47E7DEAE6EEF4CF" />
    
    <!-- yandex Site Verification Meta Tag -->
    <meta name="yandex-verification" content="27149014e6b080dd" />

    <!-- Meta Tags for SEO -->
    <meta name="description" content="Join RallyNex to support impactful campaigns across global causes like Environmental Conservation, Education, Health, and Equality. Create, share, and fund projects that drive positive change in your community and beyond. Become part of a passionate community dedicated to making a difference today!">
    <meta name="keywords" content="crowdfunding, global causes, environmental conservation, community development, health and wellness, education, equality and inclusion, animal welfare, humanitarian aid, sustainable development, economic empowerment, policy advocacy, artistic advocacy, support campaigns, social impact">
    <meta name="author" content="RallyNex Team">
    <meta name="language" content="English">
    <link rel="canonical" href="https://rallynex.onrender.com">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="RallyNex - Support Campaigns and Causes">
    <meta property="og:description" content="Join RallyNex to support impactful campaigns across global causes like Environmental Conservation, Health, and Education. Create, share, and fund projects that drive positive change!">
    <meta property="og:url" content="https://rallynex.onrender.com">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://rallynex.s3.eu-north-1.amazonaws.com/main/files/og-image.png">
    <meta property="og:image:alt" content="RallyNex platform image">
    <meta property="og:site_name" content="RallyNex">
    <meta property="og:locale" content="en_US">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="RallyNex - Support Campaigns and Causes">
    <meta name="twitter:description" content="Join RallyNex to support impactful campaigns across global causes like Environmental Conservation, Health, and Education. Create, share, and fund projects that drive positive change!">
    <meta name="twitter:image" content="https://rallynex.s3.eu-north-1.amazonaws.com/main/files/og-image.png">
    <meta name="twitter:image:alt" content="RallyNex platform image">
    <meta name="twitter:site" content="@RallyNex">
 

    <title>RallyNex - Together for Change: Support Global Campaigns and Transform Lives</title>

    <style>
    

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }

        .success-message {
            color: green;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        button {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: block;
            width: 100%;
        }

        button:hover {
            background-color: #218838;
        }

        .progress {
            margin: 20px 0;
            height: 1rem;
            background-color: #e9ecef;
            border-radius: 0.25rem;
        }

        .progress-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            text-align: center;
            white-space: nowrap;
            transition: width 0.6s ease;
            height: 100%;
        }

        .progress-bar-low {
            background-color: #dc3545; /* Red for 0-50% */
        }

        .progress-bar-medium {
            background-color: #ffc107; /* Yellow for 51-99% */
        }

        .progress-bar-high {
            background-color: #28a745; /* Green for 100% */
        }

        .message {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h3 style="font-size: 18px; padding: 8px;">{{ campaign.title }}</h3>

    <!-- Display success messages -->
    {% if messages %}
        {% for message in messages %}
            <div class="success-message">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <!-- Form to update campaign fund -->
    {% if user == campaign.user.user %}
        {% if target_reached %}
            <div class="message" style="color: red;">Make a difference! This campaign has reached its funding goal!</div>
        {% else %}
            <form method="POST">
                {% csrf_token %}
                <div class="form-group">
                    {{ fund_form.target_amount.label_tag }}
                    {{ fund_form.target_amount }}
                </div>
                <div class="form-group">
                    {{ fund_form.paypal_email.label_tag }}
                    {{ fund_form.paypal_email }}
                </div>
                <button type="submit" name="update_campaign">Update Donation Info</button>
            </form>
        {% endif %}
    {% endif %}

    <div class="progress">
        {% if fund.progress_percentage < 50 %}
            <div class="progress-bar progress-bar-low" role="progressbar" style="width: {{ fund.progress_percentage }}%;" aria-valuenow="{{ fund.progress_percentage }}" aria-valuemin="0" aria-valuemax="100">
                {{ fund.progress_percentage|floatformat:2 }}%
            </div>
        {% elif fund.progress_percentage < 100 %}
            <div class="progress-bar progress-bar-medium" role="progressbar" style="width: {{ fund.progress_percentage }}%;" aria-valuenow="{{ fund.progress_percentage }}" aria-valuemin="0" aria-valuemax="100">
                {{ fund.progress_percentage|floatformat:2 }}%
            </div>
        {% else %}
            <div class="progress-bar progress-bar-high" role="progressbar" style="width: {{ fund.progress_percentage }}%;" aria-valuenow="{{ fund.progress_percentage }}" aria-valuemin="0" aria-valuemax="100">
                {{ fund.progress_percentage|floatformat:2 }}%
            </div>
        {% endif %}
    </div>

    <div class="message">
        <span>Amount Raised: ${{ fund.amount_raised }} / ${{ fund.target_amount }}</span>
    </div>

    <!-- Donation Form -->
    {% if target_reached %}
        <div class="message" style="color: red;">This campaign has reached its funding goal!</div>
        <p class="message">Thank you for your effort and support towards this cause. Your contribution has made a real difference!</p>
    {% else %}
        <form method="POST">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" name="donate">Donate</button>
        </form>
    {% endif %}
</body>
</html>
{% endblock %}
